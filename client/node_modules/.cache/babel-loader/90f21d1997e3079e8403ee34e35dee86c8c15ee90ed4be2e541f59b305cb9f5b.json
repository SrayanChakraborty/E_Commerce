{"ast":null,"code":"import _toConsumableArray from\"/Users/sagnikchakraborty/Desktop/shop/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/sagnikchakraborty/Desktop/shop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sagnikchakraborty/Desktop/shop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sagnikchakraborty/Desktop/shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/sagnikchakraborty/Desktop/shop/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useEffect,useState}from'react';import styled from'styled-components';import{popularproduct}from'../items';import Product from'./product';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display:flex; \\n  padding:30px;\\n  flex-wrap: wrap;\\n  justify-content: space-between;\\n\"])));function Products(_ref){var cat=_ref.cat,sort=_ref.sort,filter=_ref.filter;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setproducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredproducts=_useState4[0],setfilteredproducts=_useState4[1];useEffect(function(){var getproduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/api/product?category=\".concat(cat));case 3:response=_context.sent;setproducts(response.data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getproduct(){return _ref2.apply(this,arguments);};}();getproduct();},[cat]);useEffect(function(){cat&&setfilteredproducts(products.filter(function(item){return Object.entries(filter).every(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return item[key].includes(value);});}));},[cat,products,filter]);useEffect(function(){if(sort==='latest'){setfilteredproducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.createdAt-b.createdAt;});});}else if(sort==='asc'){setfilteredproducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.price-b.price;});});}else{setfilteredproducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return b.price-a.price;});});}},[sort]);return/*#__PURE__*/_jsx(Container,{children:cat?filteredproducts.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);}):popularproduct.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);})});}export default Products;","map":{"version":3,"names":["React","useEffect","useState","styled","popularproduct","Product","axios","jsx","_jsx","Container","div","_templateObject","_taggedTemplateLiteral","Products","_ref","cat","sort","filter","_useState","_useState2","_slicedToArray","products","setproducts","_useState3","_useState4","filteredproducts","setfilteredproducts","getproduct","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","stop","apply","arguments","item","Object","entries","every","_ref3","_ref4","key","value","includes","_toConsumableArray","a","b","createdAt","price","children","map","id"],"sources":["/Users/sagnikchakraborty/Desktop/shop/client/src/components/products.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { popularproduct } from '../items';\nimport Product from './product';\nimport axios from 'axios';\n\nconst Container = styled.div`\n  display:flex; \n  padding:30px;\n  flex-wrap: wrap;\n  justify-content: space-between;\n`\n\n\n\n\n\n\n\nfunction Products({ cat, sort, filter }) {\n\n    const [products, setproducts] = useState([]);\n    const [filteredproducts, setfilteredproducts] = useState([]);\n    \n\n    useEffect(() => {\n        const getproduct = async () => {\n            try {\n                const response = await axios.get(`http://localhost:5000/api/product?category=${cat}`);\n                setproducts(response.data);\n            } catch (err) {\n               \n            }\n        }\n        getproduct();\n    }, [cat])\n\n\n    useEffect(() => {\n        cat && setfilteredproducts(\n            products.filter((item) => Object.entries(filter).every(([key, value]) => {\n                return (item[key].includes(value))\n            }))\n        )\n    }, [cat, products, filter]);\n\n\n    useEffect(()=>{\n        if((sort==='latest')){\n            setfilteredproducts((prev)=>{\n                return([...prev].sort((a,b)=>a.createdAt-b.createdAt));\n            });\n\n        }\n        else if((sort==='asc')){\n            setfilteredproducts((prev)=>{\n                return([...prev].sort((a,b)=>a.price-b.price));\n            })\n        }\n        else{\n            setfilteredproducts((prev)=>{\n                return([...prev].sort((a,b)=>b.price-a.price)); \n            })\n        }\n    },[sort]);\n\n    return (\n        <Container>\n            {\n                cat? filteredproducts.map(item=>{\n                    return (<Product item={item} key={item.id} />)\n                }):popularproduct.map((item)=>{\n                    return (<Product item={item} key={item.id} />) \n                })\n            }\n\n        </Container>\n    )\n\n\n\n}\n\nexport default Products;\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}